"use strict";window.matchMedia||(window.matchMedia=function(){var e=window.styleMedia||window.media;if(!e){var t=document.createElement("style"),n=document.getElementsByTagName("script")[0],i=null;t.type="text/css",t.id="matchmediajs-test",n.parentNode.insertBefore(t,n),i="getComputedStyle"in window&&window.getComputedStyle(t,null)||t.currentStyle,e={matchMedium:function(e){var n="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return t.styleSheet?t.styleSheet.cssText=n:t.textContent=n,"1px"===i.width}}}return function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}()),function(e,t,n){function i(t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t:"function"==typeof define&&define.amd&&define("picturefill",function(){return t}),"object"==typeof e&&(e.picturefill=t)}function r(e){var t,n,i,r,o,c=e||{};t=c.elements||s.getAllElements();for(var l=0,u=t.length;u>l;l++)if(n=t[l],i=n.parentNode,r=void 0,o=void 0,"IMG"===n.nodeName.toUpperCase()&&(n[s.ns]||(n[s.ns]={}),c.reevaluate||!n[s.ns].evaluated)){if(i&&"PICTURE"===i.nodeName.toUpperCase()){if(s.removeVideoShim(i),r=s.getMatch(n,i),r===!1)continue}else r=void 0;(i&&"PICTURE"===i.nodeName.toUpperCase()||!s.sizesSupported&&n.srcset&&a.test(n.srcset))&&s.dodgeSrcset(n),r?(o=s.processSourceSet(r),s.applyBestCandidate(o,n)):(o=s.processSourceSet(n),(void 0===n.srcset||n[s.ns].srcset)&&s.applyBestCandidate(o,n)),n[s.ns].evaluated=!0}}function o(){function n(){clearTimeout(i),i=setTimeout(a,60)}s.initTypeDetects(),r();var i,o=setInterval(function(){return r(),/^loaded|^i|^c/.test(t.readyState)?void clearInterval(o):void 0},250),a=function(){r({reevaluate:!0})};e.addEventListener?e.addEventListener("resize",n,!1):e.attachEvent&&e.attachEvent("onresize",n)}if(e.HTMLPictureElement)return void i(function(){});t.createElement("picture");var s=e.picturefill||{},a=/\s+\+?\d+(e\d+)?w/;s.ns="picturefill",function(){s.srcsetSupported="srcset"in n,s.sizesSupported="sizes"in n,s.curSrcSupported="currentSrc"in n}(),s.trim=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},s.makeUrl=function(){var e=t.createElement("a");return function(t){return e.href=t,e.href}}(),s.restrictsMixedContent=function(){return"https:"===e.location.protocol},s.matchesMedia=function(t){return e.matchMedia&&e.matchMedia(t).matches},s.getDpr=function(){return e.devicePixelRatio||1},s.getWidthFromLength=function(e){var n;if(!e||e.indexOf("%")>-1!=!1||!(parseFloat(e)>0||e.indexOf("calc(")>-1))return!1;e=e.replace("vw","%"),s.lengthEl||(s.lengthEl=t.createElement("div"),s.lengthEl.style.cssText="border:0;display:block;font-size:1em;left:0;margin:0;padding:0;position:absolute;visibility:hidden",s.lengthEl.className="helper-from-picturefill-js"),s.lengthEl.style.width="0px";try{s.lengthEl.style.width=e}catch(i){}return t.body.appendChild(s.lengthEl),n=s.lengthEl.offsetWidth,0>=n&&(n=!1),t.body.removeChild(s.lengthEl),n},s.detectTypeSupport=function(t,n){var i=new e.Image;return i.onerror=function(){s.types[t]=!1,r()},i.onload=function(){s.types[t]=1===i.width,r()},i.src=n,"pending"},s.types=s.types||{},s.initTypeDetects=function(){s.types["image/jpeg"]=!0,s.types["image/gif"]=!0,s.types["image/png"]=!0,s.types["image/svg+xml"]=t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),s.types["image/webp"]=s.detectTypeSupport("image/webp","data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=")},s.verifyTypeSupport=function(e){var t=e.getAttribute("type");if(null===t||""===t)return!0;var n=s.types[t];return"string"==typeof n&&"pending"!==n?(s.types[t]=s.detectTypeSupport(t,n),"pending"):"function"==typeof n?(n(),"pending"):n},s.parseSize=function(e){var t=/(\([^)]+\))?\s*(.+)/g.exec(e);return{media:t&&t[1],length:t&&t[2]}},s.findWidthFromSourceSize=function(n){for(var i,r=s.trim(n).split(/\s*,\s*/),o=0,a=r.length;a>o;o++){var c=r[o],l=s.parseSize(c),u=l.length,d=l.media;if(u&&(!d||s.matchesMedia(d))&&(i=s.getWidthFromLength(u)))break}return i||Math.max(e.innerWidth||0,t.documentElement.clientWidth)},s.parseSrcset=function(e){for(var t=[];""!==e;){e=e.replace(/^\s+/g,"");var n,i=e.search(/\s/g),r=null;if(-1!==i){n=e.slice(0,i);var o=n.slice(-1);if((","===o||""===n)&&(n=n.replace(/,+$/,""),r=""),e=e.slice(i+1),null===r){var s=e.indexOf(",");-1!==s?(r=e.slice(0,s),e=e.slice(s+1)):(r=e,e="")}}else n=e,e="";(n||r)&&t.push({url:n,descriptor:r})}return t},s.parseDescriptor=function(e,t){var n,i=t||"100vw",r=e&&e.replace(/(^\s+|\s+$)/g,""),o=s.findWidthFromSourceSize(i);if(r)for(var a=r.split(" "),c=a.length-1;c>=0;c--){var l=a[c],u=l&&l.slice(l.length-1);if("h"!==u&&"w"!==u||s.sizesSupported){if("x"===u){var d=l&&parseFloat(l,10);n=d&&!isNaN(d)?d:1}}else n=parseFloat(parseInt(l,10)/o)}return n||1},s.getCandidatesFromSourceSet=function(e,t){for(var n=s.parseSrcset(e),i=[],r=0,o=n.length;o>r;r++){var a=n[r];i.push({url:a.url,resolution:s.parseDescriptor(a.descriptor,t)})}return i},s.dodgeSrcset=function(e){e.srcset&&(e[s.ns].srcset=e.srcset,e.srcset="",e.setAttribute("data-pfsrcset",e[s.ns].srcset))},s.processSourceSet=function(e){var t=e.getAttribute("srcset"),n=e.getAttribute("sizes"),i=[];return"IMG"===e.nodeName.toUpperCase()&&e[s.ns]&&e[s.ns].srcset&&(t=e[s.ns].srcset),t&&(i=s.getCandidatesFromSourceSet(t,n)),i},s.backfaceVisibilityFix=function(e){var t=e.style||{},n="webkitBackfaceVisibility"in t,i=t.zoom;n&&(t.zoom=".999",n=e.offsetWidth,t.zoom=i)},s.setIntrinsicSize=function(){var n={},i=function(e,t,n){t&&e.setAttribute("width",parseInt(t/n,10))};return function(r,o){var a;r[s.ns]&&!e.pfStopIntrinsicSize&&(void 0===r[s.ns].dims&&(r[s.ns].dims=r.getAttribute("width")||r.getAttribute("height")),r[s.ns].dims||(o.url in n?i(r,n[o.url],o.resolution):(a=t.createElement("img"),a.onload=function(){if(n[o.url]=a.width,!n[o.url])try{t.body.appendChild(a),n[o.url]=a.width||a.offsetWidth,t.body.removeChild(a)}catch(e){}r.src===o.url&&i(r,n[o.url],o.resolution),r=null,a.onload=null,a=null},a.src=o.url)))}}(),s.applyBestCandidate=function(e,t){var n,i,r;e.sort(s.ascendingSort),i=e.length,r=e[i-1];for(var o=0;i>o;o++)if(n=e[o],n.resolution>=s.getDpr()){r=n;break}r&&(r.url=s.makeUrl(r.url),t.src!==r.url&&(s.restrictsMixedContent()&&"http:"===r.url.substr(0,"http:".length).toLowerCase()?void 0!==window.console&&console.warn("Blocked mixed content image "+r.url):(t.src=r.url,s.curSrcSupported||(t.currentSrc=t.src),s.backfaceVisibilityFix(t))),s.setIntrinsicSize(t,r))},s.ascendingSort=function(e,t){return e.resolution-t.resolution},s.removeVideoShim=function(e){var t=e.getElementsByTagName("video");if(t.length){for(var n=t[0],i=n.getElementsByTagName("source");i.length;)e.insertBefore(i[0],n);n.parentNode.removeChild(n)}},s.getAllElements=function(){for(var e=[],n=t.getElementsByTagName("img"),i=0,r=n.length;r>i;i++){var o=n[i];("PICTURE"===o.parentNode.nodeName.toUpperCase()||null!==o.getAttribute("srcset")||o[s.ns]&&null!==o[s.ns].srcset)&&e.push(o)}return e},s.getMatch=function(e,t){for(var n,i=t.childNodes,r=0,o=i.length;o>r;r++){var a=i[r];if(1===a.nodeType){if(a===e)return n;if("SOURCE"===a.nodeName.toUpperCase()){null!==a.getAttribute("src")&&void 0!==typeof console&&console.warn("The `src` attribute is invalid on `picture` `source` element; instead, use `srcset`.");var c=a.getAttribute("media");if(a.getAttribute("srcset")&&(!c||s.matchesMedia(c))){var l=s.verifyTypeSupport(a);if(l===!0){n=a;break}if("pending"===l)return!1}}}}return n},o(),r._=s,i(r)}(window,window.document,new window.Image),function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var i=(new Date).getTime(),r=Math.max(0,16-(i-e)),o=window.setTimeout(function(){t(i+r)},r);return e=i+r,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),hsr=hsr||{},hsr.blog=function(e,t){var n=t,i=t,r=t,o=t,s=document.querySelector("body"),a="http://www.fredericaerts.com/external/projects/highlight-science-writing/";return n=function(){i()},i=function(){function e(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=e.getDate(),i=e.getMonth(),r=e.getFullYear();return t[i]+" "+n+", "+r}var t=document.querySelector(".js-blogposts-container"),n=document.querySelector(".js-blog-post-template");o(a+"blog/backend/handler.php?property=meta",function(i){var o=JSON.parse(i),s=[];Object.keys(o).forEach(function(e){s.push(o[e+""])}),s.map(function(e){var t=e.date.split("/");return e.date=new Date(t[2],t[1]-1,t[0]),e}),s.sort(function(e,t){return t.date-e.date}),s.forEach(function(i){var o=n.cloneNode(!0),s=o.querySelector(".js-blog-post-title"),a=o.querySelector(".js-blog-post-date"),c=o.querySelector(".js-blog-post-description");s.innerHTML=i.title+s.innerHTML,a.textContent=e(i.date),c.textContent=i.description,r(o.querySelector(".js-blog-post"),i),t.appendChild(o)}),n.parentNode.removeChild(n)})},r=function(t,n){function i(n){r.innerHTML="",c.style.display="block",t.style.top=n.target.blogPostOffset.top+"px",t.style.left=n.target.blogPostOffset.left+"px",t.style.width=n.target.blogPostDimensions.width+"px",t.style.height=n.target.blogPostDimensions.height+"px",t.classList.remove("positioned"),e.setTimeout(function(){s.style.overflow="",t.classList.remove("active")},300),n.stopPropagation()}var r=t.querySelector(".js-blog-post-content"),c=t.querySelector(".js-blog-post-intro"),l=t.querySelector(".js-spinner");t.addEventListener("click",function(u){if(!t.classList.contains("active")){s.style.overflow="hidden";var d=t.getBoundingClientRect(),p={width:t.offsetWidth,height:t.offsetHeight};t.classList.add("active"),t.style.width=p.width+"px",t.style.height=t.parentNode.style.height=p.height+"px",t.style.top=d.top+"px",t.style.left=d.left+"px",e.setTimeout(function(){t.style.top="0",t.style.left="0",t.style.width=e.innerWidth+"px",t.style.height=e.innerHeight+"px"},50),e.setTimeout(function(){t.classList.add("positioned")},300);var m=t.getElementsByTagName("h1")[0].getElementsByTagName("span")[0];m.blogPostOffset=d,m.blogPostDimensions=p,m.removeEventListener("click",i),m.addEventListener("click",i),c.style.display="none",l.style.display="inline-block",setTimeout(function(){l.style.display="inline-block",setTimeout(function(){l.classList.add("active")},50)},250),o(a+"blog/backend/handler.php?property=body&folder="+n.folder,function(e){var t=e;l.classList.remove("active"),setTimeout(function(){l.style.display="none",r.innerHTML=t,r.classList.add("active")},300)})}})},o=function(t,n){var i=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return i.open("GET",t),i.onreadystatechange=function(){i.readyState>3&&200==i.status&&n(i.responseText)},i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.send(),i},{init:n}}(window),hsr=hsr||{},hsr.contactForm=function(e,t){var n=t,i=t,r="http://www.fredericaerts.com/external/projects/highlight-science-writing/",o=document.querySelector(".contact-form"),s=[].slice.call(document.querySelectorAll(".contact-form .input__field")),a=document.querySelector(".contact-form #input-honeypot"),c=document.querySelector(".contact-form #input-name"),l=document.querySelector(".contact-form #input-email"),u=document.querySelector(".contact-form #input-message"),d=document.querySelector(".contact-form .js-submit-contact-form");return n=function(){i()},i=function(){function t(e){e.target.parentNode.classList.add("js-input-filled"),e.target.parentNode.classList.remove("js-empty"),e.target.parentNode.classList.remove("js-invalid")}function n(e){""===e.target.value.trim()&&e.target.parentNode.classList.remove("js-input-filled")}function i(e){d.removeEventListener("click",i);var t=""===c.value.trim(),n=""===l.value.trim(),v=p(l.value.trim()),h=""===u.value.trim();if(c.parentNode.classList.remove("js-empty"),l.parentNode.classList.remove("js-empty"),l.parentNode.classList.remove("js-invalid"),u.parentNode.classList.remove("js-empty"),t&&c.parentNode.classList.add("js-empty"),n?l.parentNode.classList.add("js-empty"):v&&l.parentNode.classList.add("js-invalid"),h&&u.parentNode.classList.add("js-empty"),t||n||v||h)d.addEventListener("click",i);else{var g=r+"backend/contact.php";f(g,m(s.concat(a)),function(e){if("nok"===e){var t=document.querySelector(".contact-form__thank-you__title"),n=document.querySelector(".contact-form__thank-you__text");t.textContent="Oops.",n.innerHTML='Something went wrong. Please contact us directly via <a href="mailto:info@highlight-science-writing.com" target="_top">info@highlight-science-writing.com</a>'}o.classList.add("sent")})}e.preventDefault()}function p(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return!t.test(e)}function m(e){var t=[];return e.forEach(function(e){e.name&&!e.disabled&&"file"!=e.type&&"reset"!=e.type&&"submit"!=e.type&&"button"!=e.type&&("checkbox"!=e.type&&"radio"!=e.type||e.checked)&&(t[t.length]=encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&").replace(/%20/g,"+")}function f(t,n,i){var r="string"==typeof n?n:Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&"),o=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return o.open("POST",t),o.onreadystatechange=function(){o.readyState>3&&200==o.status&&i(o.responseText)},o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(r),o}s.forEach(function(e){""!==e.value.trim()&&e.parentNode.classList.add("js-input-filled"),e.addEventListener("focus",t),e.addEventListener("blur",n)}),d&&d.addEventListener("click",i)},{init:n}}(window),hsr=hsr||{},hsr.flipside=function(e,t){var n=t,i=t,r=t,o=document.querySelector(".js-services"),s=[].slice.call(document.querySelectorAll(".flipside"));return n=function(){r()},r=function(){s.forEach(function(t){var n=t.querySelector(".flipside__front"),i=t.querySelector(".js-close-flip"),r=t.querySelector(".flipside__back__content");n.addEventListener("click",function(n){var i=e.innerWidth,a=s.filter(function(e){return e.classList.contains("is-open")})[0];a||(s.forEach(function(e){e.classList.add("blurred")}),t.classList.remove("blurred"),t.classList.add("is-open"),768>i?(t.style.width=i-30+"px",r.style.width=i-80+"px"):(t.removeAttribute("style"),r.removeAttribute("style")),o.classList.add("tile-open"),n.stopPropagation())}),i.addEventListener("click",function(e){s.forEach(function(e){e.classList.remove("blurred")}),t.classList.remove("is-open"),t.removeAttribute("style"),r.removeAttribute("style"),o.classList.remove("tile-open"),e.stopPropagation()})})},i=function(){s.forEach(function(e){var t=e.querySelector(".flipside__back__content");e.classList.remove("blurred"),e.classList.remove("is-open"),e.removeAttribute("style"),t.removeAttribute("style"),o.classList.remove("tile-open")})},{init:n,closeTiles:i}}(window),hsr=hsr||{},hsr.helpers=function(e,t){return{}}(window),hsr=hsr||{},hsr.nav=function(e,t){var n=t,i=t,r=t,o=t,s=t,a=document.querySelector(".js-bg-marker"),c=document.querySelector(".js-header__mobile-menu"),l=[document.querySelector(".js-services"),document.querySelector(".js-clients"),document.querySelector(".js-blog"),document.querySelector(".js-about"),document.querySelector(".js-contact")],u=-1,d=document.querySelector("body"),p=document.querySelector(".js-nav-link-wrapper"),m=[].slice.call(document.querySelectorAll(".js-header__nav__link"));return n=function(){d.classList.add("on-landing-page"),d.style.height=e.innerHeight+"px",i(),r(),o()},i=function(){c.addEventListener("click",function(){c.classList.contains("open")?c.classList.remove("open"):c.classList.add("open")})},r=function(){var e=document.querySelector(".js-header__logo");e.addEventListener("click",function(){s(-1)})},o=function(){var e=[].slice.call(document.querySelectorAll(".js-hero__buttons button")),t=[].slice.call(document.querySelectorAll(".js-nav-link")),n=m.concat(e,t);n.forEach(function(e){e.addEventListener("click",function(e){var t=parseInt(e.target.getAttribute("data-target-index"),10);s(t)})})},s=function(t){function n(){m.forEach(function(e){e.classList.remove("active")})}function i(){m.filter(function(e){return parseInt(e.getAttribute("data-target-index"),10)===t})[0].classList.add("active")}if(c.classList.remove("open"),t!==u){var r=l[u],o=l[t];n(),0>t?(d.classList.add("on-landing-page"),d.style.height=e.innerHeight+"px",p.classList.remove("page-from-left","page-from-right"),r.classList.add("active--from-bottom"),r.classList.remove("positioned","active--from-right","active--from-left"),setTimeout(function(){r.classList.remove("active","active--from-bottom"),a.classList.add("landing-page")},100)):0>u?(n(),o.classList.add("active","active--from-bottom"),a.classList.remove("landing-page"),setTimeout(function(){o.classList.add("positioned"),i(),d.classList.remove("on-landing-page"),d.style.height="100%"},700)):u>t?(p.classList.remove("page-from-left"),p.classList.add("page-from-right"),n(),r.classList.add("active--from-right"),r.classList.remove("positioned","active--from-bottom","active--from-left"),setTimeout(function(){r.classList.remove("active","active--from-right"),o.classList.add("active","active--from-left"),setTimeout(function(){o.classList.add("positioned"),i()},100)},300)):(p.classList.remove("page-from-right"),p.classList.add("page-from-left"),n(),r.classList.add("active--from-left"),r.classList.remove("positioned","active--from-bottom","active--from-right"),setTimeout(function(){r.classList.remove("active","active--from-left"),o.classList.add("active","active--from-right"),setTimeout(function(){o.classList.add("positioned"),i()},100)},300)),u=t}},{init:n}}(window);var hsr=hsr||{};hsr.app=function(e,t){function n(){e.addEventListener("click",function(e){hsr.flipside.closeTiles()})}var i=function(){hsr.nav.init(),hsr.contactForm.init(),hsr.blog.init(),hsr.flipside.init(),n()};return{init:i}}(window),document.addEventListener("DOMContentLoaded",function(){hsr.app.init()},!1);